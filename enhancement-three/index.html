<!DOCTYPE HTML>
<html>
<head>
    <title>Enhancement Three: Safe Delete Backup History</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <link rel="stylesheet" href="../assets/css/main.css" />

    <!-- Prism.js CSS for syntax highlighting -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.30.0/themes/prism-tomorrow.min.css" rel="stylesheet"/>

    <style>
        pre {
            background-color: #f4f4f4;
            padding: 10px;
            border-left: 4px solid #3498db;
            overflow-x: auto;
        }
        code {
            font-family: Consolas, monospace;
        }
        p {
            margin-bottom: 1em;
        }
        h3 {
            margin-top: 1.5em;
            color: #2c3e50;
        }
    </style>
</head>
<body class="is-preload">

<div id="wrapper">

    <div id="main">
        <div class="inner">

            <!-- Header -->
            <header id="header">
                <a href="../index.html" class="logo"><strong>Samit Datta</strong></a>
                <ul class="icons">
                    <li>
                        <a href="https://github.com/samitcodes" class="icon brands fa-github" target="_blank">
                            <span class="label">GitHub</span>
                        </a>
                    </li>
                    <li>
                        <a href="https://www.linkedin.com/in/samitdattaofficial/" class="icon brands fa-linkedin" target="_blank">
                            <span class="label">LinkedIn</span>
                        </a>
                    </li>
                </ul>
            </header>

            <section>
                <header class="main">
                    <h2>Enhancement Three: Safe Delete Backup History</h2>
                </header>

                <!-- GitHub button -->
                <div class="github-button">
                    <a href="https://github.com/samitcodes/WeightTrackerApp/tree/3610ef253906b345917ce0a64c86eed046fb0efc/Enhancement3"
                       class="button small"
                       target="_blank"
                       rel="noopener noreferrer">
                        <i class="fab fa-github" style="margin-right: 0.5em;"></i>
                        Enhancement Three Repository
                    </a>
                </div>

                <div class="content">

                    <h3>Artifact Description</h3>
                    <p>
                        This enhancement extends my original weight-tracking application from CS360 by introducing
                        a safe-delete backup history system. Instead of permanently deleting user accounts and
                        associated weight records, the system now applies a soft-deletion process that marks records
                        as inactive while preserving them in the database.
                    </p>
                    <p>
                        When a user deletes their account, access is immediately revoked, but all historical data
                        remains intact in its original state. This design supports recovery, auditing, and long-term
                        data integrity while preventing unauthorized access. The enhancement demonstrates a secure
                        data lifecycle approach rather than destructive data handling.
                    </p>

                    <h3>Soft-Delete Database Design</h3>
                    <p>
                        The core of this enhancement is a deletion flag added to the database schema. Instead of
                        removing rows, records are marked inactive and excluded from normal queries.
                    </p>

                    <pre><code class="language-sql">ALTER TABLE users ADD COLUMN is_deleted INTEGER DEFAULT 0;
ALTER TABLE weights ADD COLUMN is_deleted INTEGER DEFAULT 0;</code></pre>

                    <h3>Account Deactivation Logic</h3>
                    <p>
                        When a user chooses to delete their account, the application updates the deletion flag
                        instead of executing a destructive delete operation.
                    </p>

                    <pre><code class="language-java">public void softDeleteUser(int userId) {
    SQLiteDatabase db = this.getWritableDatabase();
    ContentValues values = new ContentValues();
    values.put("is_deleted", 1);

    db.update("users", values, "id = ?", new String[]{String.valueOf(userId)});
    db.update("weights", values, "user_id = ?", new String[]{String.valueOf(userId)});
}</code></pre>

                    <h3>Access Control Enforcement</h3>
                    <p>
                        The application prevents inactive users from authenticating by validating the deletion flag
                        during login.
                    </p>

                    <pre><code class="language-java">Cursor cursor = db.rawQuery(
    "SELECT * FROM users WHERE username = ? AND password = ? AND is_deleted = 0",
    new String[]{username, password}
);</code></pre>

                    <h3>Justification for Inclusion</h3>
                    <p>
                        This artifact was selected for the database category because it demonstrates secure data
                        handling for sensitive health information. Weight records require confidentiality,
                        integrity, and availability, all of which are supported through controlled access and
                        non-destructive operations.
                    </p>
                    <p>
                        The enhancement shows that databases are not merely storage systems but enforce business
                        logic, prevent invalid operations, and protect against accidental or malicious data loss.
                        The soft-delete design reflects real-world database engineering practices used in
                        production systems.
                    </p>

                    <h3>Reflection</h3>
                    <p>
                        Initially, I considered using a separate backup database. After evaluating the complexity
                        and risk of data inconsistency across systems, I recognized that a soft-delete approach
                        provided a safer and more efficient solution. Maintaining a single source of truth reduced
                        the likelihood of corruption while enabling immediate recovery.
                    </p>
                    <p>
                        The most challenging aspect was ensuring that inactive users were completely blocked from
                        system access without impacting stored data. This enhancement strengthened my understanding
                        of defensive database design and reinforced that well-planned simplicity often offers
                        greater security than complex redundancy.
                    </p>

                </div>
            </section>

        </div>
    </div>

    <!-- Sidebar -->
    <div id="sidebar">
        <div class="inner">
            <nav id="menu">
                <header class="major">
                    <h2>Menu</h2>
                </header>
                <ul>
                    <li><a href="../index.html">Home</a></li>
                    <li><a href="../codereview/">Code Review</a></li>
                    <li><a href="../enhancement-one/">Enhancement One</a></li>
                    <li><a href="../enhancement-two/">Enhancement Two</a></li>
                    <li><a href="../enhancement-three/">Enhancement Three</a></li>
                    <li><a href="../professional-self-assessment/">Professional Self Assessment</a></li>
                </ul>
            </nav>
        </div>
    </div>

</div>

<!-- Prism.js scripts -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.30.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.30.0/plugins/autoloader/prism-autoloader.min.js"></script>

<!-- HTML5 UP scripts -->
<script src="../assets/js/jquery.min.js"></script>
<script src="../assets/js/browser.min.js"></script>
<script src="../assets/js/breakpoints.min.js"></script>
<script src="../assets/js/util.js"></script>
<script src="../assets/js/main.js"></script>

</body>
</html>

